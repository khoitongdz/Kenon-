local Fluent = loadstring(game:HttpGet("https://raw.githubusercontent.com/khoitongdz/ui/refs/heads/main/.gitignore"))()
local Window = Fluent:CreateWindow({
    Title = "Kenon Hub",  -- Updated to the desired name
    SubTitle = "Premium",
    TabWidth = 110,
    Size = UDim2.fromOffset(480, 320),
    Acrylic = false,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.End
})

print([[ 
███████╗ █████╗ ███╗   ██╗
██╔════╝██╔══██╗████╗  ██║
█████╗  ███████║██╔██╗ ██║
██╔══╝  ██╔══██║██║╚██╗██║
███████╗██║  ██║██║ ╚████║
╚══════╝╚═╝  ╚═╝╚═╝  ╚═══╝
]])
print("🔥 Kenon hub 🔥")

-- Player setup
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local replicatedStorage = game:GetService("ReplicatedStorage")

-- Function to find nearest enemy
local function findNearestEnemy()
    local closestEnemy = nil
    local shortestDistance = math.huge
    for _, enemy in pairs(game.Workspace.Enemies:GetChildren()) do
        if enemy:FindFirstChild("HumanoidRootPart") and enemy:FindFirstChild("Humanoid") and enemy.Humanoid.Health > 0 then
            local distance = (enemy.HumanoidRootPart.Position - character.HumanoidRootPart.Position).Magnitude
            if distance < shortestDistance then
                closestEnemy = enemy
                shortestDistance = distance
            end
        end
    end
    return closestEnemy
end

-- Function to attack nearest enemy
local function attackEnemy(target)
    character.HumanoidRootPart.CFrame = target.HumanoidRootPart.CFrame
    replicatedStorage.RemoteEvent:FireServer("Attack", target)
end

-- Auto-attack loop
spawn(function()
    while wait(0.1) do
        local target = findNearestEnemy()
        if target then
            attackEnemy(target)
        end
    end
end)

-- Modules for farming and toggles
local Toggle = Window:AddToggle("Auto Farm Bone", {Title = "Toggle Auto Farm Bone", Default = false })
Toggle:OnChanged(function(Value)
    _G.AutoBone = Value
end)

-- Logic for Bone Farm
local BoneCFrame = CFrame.new(-9515.75, 174.8521728515625, 6079.40625) -- Bone position 1
local BoneCFrame2 = CFrame.new(-9359.453125, 141.32679748535156, 5446.81982421875) -- Bone position 2

spawn(function()
    while wait(0.1) do
        if _G.AutoBone then
            pcall(function()
                local QuestTitle = player.PlayerGui.Main.Quest.Container.QuestTitle.Title.Text
                if not string.find(QuestTitle, "Demonic Soul") then
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("AbandonQuest")
                end
                
                -- Teleport to farm location if not near enough
                if (player.Character.HumanoidRootPart.Position - BoneCFrame2.Position).Magnitude > 2500 then
                    player.Character.HumanoidRootPart.CFrame = BoneCFrame2
                elseif (player.Character.HumanoidRootPart.Position - BoneCFrame.Position).Magnitude < 2500 then
                    player.Character.HumanoidRootPart.CFrame = BoneCFrame
                end
                
                -- Start Quest if near BoneCFrame
                if (BoneCFrame.Position - player.Character.HumanoidRootPart.Position).Magnitude <= 3 then
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("StartQuest", "HauntedQuest2", 1)
                end
            end)
        end
    end
end)

-- Auto attack while farming
spawn(function()
    while wait(0.1) do
        if _G.AutoBone then
            pcall(function()
                -- Logic to attack enemies while farming
                for _, enemy in pairs(game.Workspace.Enemies:GetChildren()) do
                    if enemy:FindFirstChild("HumanoidRootPart") and enemy:FindFirstChild("Humanoid") and enemy.Humanoid.Health > 0 then
                        if enemy.Name == "Reborn Skeleton" or enemy.Name == "Living Zombie" or enemy.Name == "Demonic Soul" or enemy.Name == "Posessed Mummy" then
                            attackEnemy(enemy)
                        end
                    end
                end
            end)
        end
    end
end)

-- Finalize the main loop
while wait(0.1) do
    if _G.AutoBone then
        local target = findNearestEnemy()
        if target then
            attackEnemy(target)
        end
    end
end
